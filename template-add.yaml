# OpenWebRX additional template sensors based on attributes

# Shows the last FT8 decoded callsign
- sensor:
  - name: webrx-ft8-callsign
    state: >
      {% if is_state('binary_sensor.webrx_lan', 'on') %}
      {{ state_attr( 'sensor.openwebrx_ft8', 'callsign') }}
      {% else %}
      {{ "unavailable" }}
      {% endif %}
    icon: mdi:radio

# Time elapsed since last FT8 decode
- sensor:
  - name: webrx-ft8-min_ago
    device_class: duration
    unit_of_measurement: "min"
    state: >
      {{ (( as_timestamp(now()) - state_attr( 'sensor.openwebrx_ft8', 'timestamp')/1000 )/ 60) | round(1) }}
    icon: mdi:clock

# Shows the selected SDR of the last profile switch
- sensor:
  - name: webrx-rx-source
    state: >
      {% if is_state('binary_sensor.webrx_lan', 'on') %}
      {{ state_attr( 'sensor.openwebrx_rx', 'source') }}
      {% else %}
      {{ "unavailable" }}
      {% endif %}
    icon: mdi:radio
